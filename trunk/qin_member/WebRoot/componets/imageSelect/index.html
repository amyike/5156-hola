<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css"
	href="css/imgareaselect-default.css" />
<link rel="stylesheet" type="text/css"
	href="css/imgareaselect-animated.css" />
<link rel="stylesheet" type="text/css"
	href="css/imgareaselect-deprecated.css" />

<script type="text/javascript" src="scripts/jquery.min.js"></script>
<script type="text/javascript"
	src="scripts/jquery.imgareaselect.pack.js"></script>

<script type="text/javascript">
	$(document).ready(function() {
		$('img#photo').imgAreaSelect({
			handles : true,
			fadeSpeed : 200,
			onSelectChange : preview,
			onSelectEnd : handler
		});
	});

	function preview(img, selection) {
		if (!selection.width || !selection.height)
			return;

		var scaleX = 100 / selection.width;
		var scaleY = 100 / selection.height;

		$('#preview img').css({
			width : Math.round(scaleX * 300),
			height : Math.round(scaleY * 300),
			marginLeft : -Math.round(scaleX * selection.x1),
			marginTop : -Math.round(scaleY * selection.y1)
		});

		$('#x1').val(selection.x1);
		$('#y1').val(selection.y1);
		$('#x2').val(selection.x2);
		$('#y2').val(selection.y2);
		$('#w').val(selection.width);
		$('#h').val(selection.height);
	}

	function handler(img, selection) {
	}

	function changeFile(path){
		$("#photo").src = path;
	}
</script>
</head>

<body>
	<h2>Live Example</h2>
	
	<div class="container demo">
		<div style="float: left; width: 50%;">
			<p class="instructions">Click and drag on the image to select an
				area.</p>

			<div class="frame"
				style="margin: 0 0.3em; width: 300px; height: 300px;">
				<img id="photo" src="images/flower2.jpg" />
			</div>
			<br>
			<input type="file" name="photo_input" id="photo_input" onchange="changeFile(this.value);" />
		</div>

		<div style="float: left; width: 50%;">
			<p style="font-size: 110%; font-weight: bold; padding-left: 0.1em;">
				Selection Preview</p>

			<div class="frame"
				style="margin: 0 1em; width: 100px; height: 100px;">
				<div id="preview"
					style="width: 100px; height: 100px; overflow: hidden;">
					<img src="images/flower2.jpg" style="width: 100px; height: 100px;" />
				</div>
			</div>

			<table style="margin-top: 1em;">
				<thead>
					<tr>
						<th colspan="2"
							style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
							Coordinates</th>
						<th colspan="2"
							style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
							Dimensions</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td style="width: 10%;"><b>X<sub>1</sub>:</b>
						</td>
						<td style="width: 30%;"><input type="text" id="x1" value="-" />
						</td>
						<td style="width: 20%;"><b>Width:</b>
						</td>
						<td><input type="text" value="-" id="w" />
						</td>
					</tr>
					<tr>
						<td><b>Y<sub>1</sub>:</b>
						</td>
						<td><input type="text" id="y1" value="-" />
						</td>
						<td><b>Height:</b>
						</td>
						<td><input type="text" id="h" value="-" />
						</td>
					</tr>
					<tr>
						<td><b>X<sub>2</sub>:</b>
						</td>
						<td><input type="text" id="x2" value="-" />
						</td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td><b>Y<sub>2</sub>:</b>
						</td>
						<td><input type="text" id="y2" value="-" />
						</td>
						<td></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>
</html>